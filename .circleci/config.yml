steps: &steps
  steps:
    - ansible/ansible-playbook:
        reponame: ansible_joke-programs_cowsay
    - run:
        name: Excute cowsay
        command: |
          export TERM=xterm
          cowsay "hello world!"

version: 2.1

orbs:
  ansible: orbss/ansible@0.0.4

jobs:
  ansible-yum:
    executor:
      name: ansible/ansible-yum
    <<: *steps
  ansible-stable:
    executor:
      name: ansible/ansible-stable
    <<: *steps
  ansible-devel:
    executor:
      name: ansible/ansible-devel
    <<: *steps

workflows:
  version: 2
  excute-playbook:
    jobs:
      - ansible-yum:
          filters:
            branches:
              only: topic
      - ansible-stable:
          filters:
            branches:
              only: topic
      - ansible-devel:
          filters:
            branches:
              only: topic
